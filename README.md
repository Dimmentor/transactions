<h2>Асинхронный REST API-сервис на FastAPI</h2>

Функционал:
1) Добавление одного или нескольких пользователей POST-запросом
2) Добавление транзакции с автоматической категоризацией POST-запросом
3) Добавление одной или нескольких транзакций с автоматической категоризацией через json-файл POST-запросом
4) Получение списка всех пользователей GET-запросом
5) Получение списка всех категорий GET-запросом
6) Получение списка всех транзакций GET-запросом
7) Получение статистики пользователя за выбранный период GET-запросом (Анализ: общая статистика)

Сервис включает: 
1) Уведомление о превышении дневного и недельного лимитов по оплатам(5000 руб./день и 30000 руб./неделю) через логирование
2) Определение категории оплаты и последующее добавление в БД по description (Анализ: категоризация)
   
    Если категория не найдена, то транзакций будет определена к категории Other
4) Валидацию входящих и выводимых данных через схемы pydantic
5) Обработчики ошибок

Тесты не писал т.к. не требовалось и не оценивается в ТЗ. Привет принципу YAGNI =) 

PS: Следовало использовать DECIMAL место FLOAT, но, думаю, не критично для тестового задания. Валюту захардкодил, поэтому работаем с рублями.

Стек: 
FastAPI, Pydantic, SQLAlchemy, Aiosqlite, Alembic, Uvicorn

Модели: 
Users, Transactions, Categories

Руководство к запуску:
* Скачайте проект
* Установите зависимости 
    ```sh
    pip install requirements.txt
    ```
* Активируйте окружение
    ```sh
    source venv/Scripts/activate
    ```
* Примените миграцию, миграция уже создана(При этом БД SQLite создастся в корне проекта)
    ```sh
    alembic upgrade head
     ```
* Запустите приложение 
    ```sh
    uvicorn app.main:app --port 8000
    ```

<h3 align="center">Предлагаю следующий гайд по тестированию, к примеру, через Postman:</h3>

1. Добавление одного пользователя
   
POST http://127.0.0.1:8000/users

```sh
    {
    "name": "Arnold"
    }
```
3. Добавление коллекции пользователей
 
POST http://127.0.0.1:8000/users

```sh
    [
      { "name": "Helga" },
      { "name": "Olga" }
    ]
```
   
5. Добавление транзакции для пользователя id=1 (с указанной категорией)
   
POST http://127.0.0.1:8000/transactions

```sh
    {
      "id": "tx1001",
      "user_id": 1,
      "amount": -400.0,
      "currency": "RUB",
      "category": "Transport",
      "description": "Airport taxi",
      "timestamp": "2025-01-20T12:00:00"
    }
```

7. Добавление транзакции для пользователя id=2 (Будет автоматически категоризировано как "Food" исходя из описания)
   
POST http://127.0.0.1:8000/transactions

```sh
    {
      "id": "tx1002",
      "user_id": 2,
      "amount": -200.0,
      "currency": "RUB",
      "category": null,
      "description": "Cafe with friends",
      "timestamp": "2025-01-20T19:00:00"
    }
```


9. Импорт транзакций из transactions.json(заполненный файл с транзакциями лежит в каталоге json)
    
POST http://127.0.0.1:8000/transactions/import

```sh
    {
      "file_path": "json/transactions.json"
    }
```
11. Проверка срабатывания обработчика лимит(смотрим в терминал)

POST http://127.0.0.1:8000/transactions

* Дневной лимит
  
    ```sh
    {
      "id": "tx1007",
      "user_id": 3,
      "amount": -5001.0,
      "currency": "RUB",
      "category": null,
      "description": "Cafe with friends",
      "timestamp": "2025-01-20T19:00:00"
    }
    ```
    
* Недельный лимит
  
    ```sh
    {
      "id": "tx1008",
      "user_id": 3,
      "amount": -25000.0,
      "currency": "RUB",
      "category": "Food",
      "description": "Cafe with friends",
      "timestamp": "2025-01-20T19:10:00"
    }
    ```
    
После того, как мы заполнили БД, можно проверить GET-запросы

12. Запрос списка всех юзеров:

GET http://127.0.0.1:8000/users


13. Запрос списка всех транзакций 

GET http://127.0.0.1:8000/transactions


14. Запрос списка транзакций выбранного пользователя за период:
   
    ```sh
    GET http://127.0.0.1:8000/users/1/stats?from=2025-01-20&to=2025-01-23
    ```

    ```sh
    GET http://127.0.0.1:8000/users/2/stats?from=2025-01-20&to=2025-01-23
    ```

    ```sh
    GET http://127.0.0.1:8000/users/3/stats?from=2025-01-20&to=2025-01-23
    ```
    

   
15. Запрос списка всех категорий
    
GET http://127.0.0.1:8000/categories


16. Удаление транзакций

DELETE http://127.0.0.1:8000/transactions/tx1008
